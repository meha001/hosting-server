{% extends "base.html" %}
{% block title %} Manage {{ app.app_name }} {% endblock %}

{% block content %}
<h1>Manage: {{ app.app_name }}</h1>
<p>Site: <a href="{{ url_for('files.serve_site', site_id=app.app_id) }}" target="_blank">/sites/{{ app.app_id }}</a></p>

<!-- Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ğ¼Ğ¸ ÑĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ -->
<div class="file-list">
    <h3>Files</h3>
    {% for file in app.get_files() %}
        <div class="file-item">
            ğŸ“„ {{ file }}
            <a href="{{ url_for('apps.download_file', app_id=app.app_id, filename=file) }}" download>â¬‡ï¸</a>

            <form action="{{ url_for('apps.delete_file', app_id=app.app_id, filename=file) }}" method="post" style="display:inline;">
                <button type="submit" onclick="return confirm('Delete file?')">âŒ</button>
            </form>
        </div>
    {% else %}
        <p>No files uploaded yet.</p>
    {% endfor %}
</div>

<!-- Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² -->
<form action="{{ url_for('apps.upload_files') }}" method="post" enctype="multipart/form-data">
    <input type="hidden" name="app_id" value="{{ app.app_id }}">
    <input type="file" name="files[]" multiple>
    <button type="submit">â• Add files</button>
</form>

<!-- Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ñ†ĞµĞ»Ğ¸ĞºĞ¾Ğ¼ -->
<p>
    <a href="{{ url_for('apps.download_app', app_id=app.app_id) }}" class="download-btn">Download ZIP</a>
</p>

<!-- Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ -->
<form action="{{ url_for('apps.delete_app', app_id=app.app_id) }}" method="post" onsubmit="return confirm('Delete the entire application?');">
    <button type="submit">ğŸ—‘ï¸ Delete application</button>
</form>

<p><a href="{{ url_for('apps.index') }}">Back to apps list</a></p>
{% endblock %}
